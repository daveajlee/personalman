{"openapi":"3.0.1","info":{"title":"PersonalMan API","description":"PersonalMan provides absence management for employees or volunteers. It is designed as a server application with a RESTful API which any client can then implement in any programming language.","license":{"name":"Apache 2.0","url":"https://www.davelee.de"},"version":"v1.2.1"},"externalDocs":{"description":"TraMS Documentation","url":"https://www.davelee.de/trams/"},"servers":[{"url":"http://localhost:8150","description":"Generated server url"}],"tags":[{"name":"/api/absences"},{"name":"/api/companies"},{"name":"/api/user"},{"name":"/api/users"},{"name":"/api/company"}],"paths":{"/api/user/logout":{"post":{"tags":["/api/user"],"summary":"Logout","description":"Logout from the system","operationId":"logout","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutRequest"}}},"required":true},"responses":{"200":{"description":"Successfully processed logout request"}}}},"/api/user/login":{"post":{"tags":["/api/user"],"summary":"Login","description":"Login to the system","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successfully processed login request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/user/":{"get":{"tags":["/api/user"],"summary":"Find a user","description":"Find a user to the system.","operationId":"getUser","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully found user","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"204":{"description":"Successful but no user found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"post":{"tags":["/api/user"],"summary":"Add a user","description":"Add a user to the system.","operationId":"addUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequest"}}},"required":true},"responses":{"201":{"description":"Successfully created user"}}},"delete":{"tags":["/api/user"],"summary":"Delete a user","description":"Delete a user from the system.","operationId":"deleteUser","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Successful but no user found"},"200":{"description":"Successfully delete user"}}}},"/api/company/":{"get":{"tags":["/api/company"],"summary":"Retrieve a company","description":"Retrieve a company from the system.","operationId":"getCompany","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Company not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"200":{"description":"Successfully retrieved company","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}}}},"post":{"tags":["/api/company"],"summary":"Add a company","description":"Add a company to the system.","operationId":"addCompany","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterCompanyRequest"}}},"required":true},"responses":{"201":{"description":"Successfully created company"}}},"delete":{"tags":["/api/company"],"summary":"Delete a company","description":"Delete a company from the system.","operationId":"deleteCompany","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully delete company"},"404":{"description":"Company not found"}}}},"/api/absences/":{"get":{"tags":["/api/absences"],"summary":"Find or count absences","description":"Find or count absences in the system according to the specified criteria.","operationId":"findAbsence","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"username","in":"query","required":false,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"category","in":"query","required":false,"schema":{"type":"string"}},{"name":"onlyCount","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully completed the search for absences","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AbsencesResponse"}}}}}},"post":{"tags":["/api/absences"],"summary":"Add an absence","description":"Add an absence to the system.","operationId":"addAbsence","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AbsenceRequest"}}},"required":true},"responses":{"201":{"description":"Successfully created absence"}}},"delete":{"tags":["/api/absences"],"summary":"Delete absences","description":"Delete absences in the system according to the specified criteria.","operationId":"deleteAbsences","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"username","in":"query","required":false,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully deleted absences"}}}},"/api/user/training":{"patch":{"tags":["/api/user"],"summary":"Add a training course","description":"Add a training course for a particular user.","operationId":"addTraining","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddTrainingRequest"}}},"required":true},"responses":{"200":{"description":"Successfully added training course"},"204":{"description":"No user found"}}}},"/api/user/timesheet":{"get":{"tags":["/api/user"],"summary":"Retrieve the user's timesheet","description":"Retrieve number of hours for a specified date (range) for a specified user.","operationId":"getHoursForDate","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully retrieved hours","content":{"*/*":{"schema":{"type":"integer","format":"int32"}}}},"204":{"description":"No user found","content":{"*/*":{"schema":{"type":"integer","format":"int32"}}}}}},"patch":{"tags":["/api/user"],"summary":"Add a number of hours to the user's timesheet","description":"Add a number of hours to a specified date for a specified user.","operationId":"addHoursForDate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddTimeSheetHoursRequest"}}},"required":true},"responses":{"200":{"description":"Successfully added hours"},"204":{"description":"No user found"}}}},"/api/user/salary":{"patch":{"tags":["/api/user"],"summary":"Update salary information","description":"Update salary information for a particular user.","operationId":"updateSalaryInformation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSalaryRequest"}}},"required":true},"responses":{"200":{"description":"Successfully updated salary information"},"204":{"description":"No user found"}}}},"/api/user/reset":{"patch":{"tags":["/api/user"],"summary":"resetUser","description":"Reset password for a user","operationId":"resetUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetUserRequest"}}},"required":true},"responses":{"200":{"description":"Successfully processed reset user request"}}}},"/api/user/password":{"patch":{"tags":["/api/user"],"summary":"changePassword","description":"Change password for a user","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successfully processed change password request"}}}},"/api/user/history":{"patch":{"tags":["/api/user"],"summary":"Add a new history entry","description":"Add a new history entry for a particular user.","operationId":"addHistoryEntry","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddHistoryEntryRequest"}}},"required":true},"responses":{"200":{"description":"Successfully added history entry"},"204":{"description":"No user found"}}}},"/api/user/deactivate":{"patch":{"tags":["/api/user"],"summary":"Deactivate a user","description":"Deactivate a user from the system.","operationId":"deactivateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeactivateUserRequest"}}},"required":true},"responses":{"200":{"description":"Successfully deactivated user","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DeactivateUserResponse"}}}},"204":{"description":"Successful but no user found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DeactivateUserResponse"}}}}}}},"/api/users/pay":{"get":{"tags":["/api/users"],"summary":"Pay all users for a company","description":"Pay all users for a company within a specific date range.","operationId":"payUsers","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully found user(s) and their pay","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PayUsersResponse"}}}},"204":{"description":"Successful but no users found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PayUsersResponse"}}}}}}},"/api/users/paid":{"get":{"tags":["/api/users"],"summary":"Mark users as paid for a company","description":"Mark users as paid for a company within a specific date range.","operationId":"paidUsers","parameters":[{"name":"paidUserRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PaidUserRequest"}}],"responses":{"200":{"description":"Successfully found user(s) and their pay"},"204":{"description":"Successful but no users found"}}}},"/api/users/":{"get":{"tags":["/api/users"],"summary":"Find all users for a company","description":"Find all users for a company to the system.","operationId":"getUsers","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully found user(s)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsersResponse"}}}},"204":{"description":"Successful but no users found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsersResponse"}}}}}}},"/api/companies/":{"get":{"tags":["/api/companies"],"summary":"Find all companies","description":"Find all companies stored in PersonalMan.","operationId":"getCompanies","responses":{"204":{"description":"Successful but no companies in database","content":{"*/*":{"schema":{"type":"array","items":{"type":"string"}}}}},"200":{"description":"Successfully found companies","content":{"*/*":{"schema":{"type":"array","items":{"type":"string"}}}}}}}}},"components":{"schemas":{"LogoutRequest":{"type":"object","properties":{"token":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"type":"object","properties":{"errorMessage":{"type":"string"},"token":{"type":"string"}}},"UserRequest":{"type":"object","properties":{"firstName":{"type":"string"},"surname":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"},"company":{"type":"string"},"leaveEntitlementPerYear":{"type":"integer","format":"int32"},"workingDays":{"type":"string"},"position":{"type":"string"},"startDate":{"type":"string"},"role":{"type":"string"},"dateOfBirth":{"type":"string"}}},"RegisterCompanyRequest":{"type":"object","properties":{"name":{"type":"string"},"defaultAnnualLeaveInDays":{"type":"integer","format":"int32"},"country":{"type":"string"}}},"AbsenceRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"startDate":{"type":"string"},"endDate":{"type":"string"},"category":{"type":"string"},"token":{"type":"string"}}},"AddTrainingRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"token":{"type":"string"},"trainingCourse":{"type":"string"}}},"AddTimeSheetHoursRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"token":{"type":"string"},"date":{"type":"string"},"hours":{"type":"integer","format":"int32"}}},"UpdateSalaryRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"token":{"type":"string"},"hourlyWage":{"type":"number","format":"double"},"contractedHoursPerWeek":{"type":"integer","format":"int32"}}},"ResetUserRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"},"token":{"type":"string"}}},"ChangePasswordRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"token":{"type":"string"},"currentPassword":{"type":"string"},"newPassword":{"type":"string"}}},"AddHistoryEntryRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"token":{"type":"string"},"date":{"type":"string"},"reason":{"type":"string"},"comment":{"type":"string"}}},"DeactivateUserRequest":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"token":{"type":"string"},"resigned":{"type":"boolean"},"leavingDate":{"type":"string"},"reason":{"type":"string"}}},"DeactivateUserResponse":{"type":"object","properties":{"leaveEntitlementForThisYear":{"type":"integer","format":"int32"}}},"PayUsersResponse":{"type":"object","properties":{"employeePayTable":{"type":"object","additionalProperties":{"type":"number","format":"double"}},"totalSum":{"type":"number","format":"double"}}},"PaidUserRequest":{"type":"object","properties":{"company":{"type":"string"},"employeePayTable":{"type":"object","additionalProperties":{"type":"number","format":"double"}},"startDate":{"type":"string"},"endDate":{"type":"string"},"token":{"type":"string"}}},"UserHistoryResponse":{"type":"object","properties":{"date":{"type":"string"},"userHistoryReason":{"type":"string"},"comment":{"type":"string"}}},"UserResponse":{"type":"object","properties":{"firstName":{"type":"string"},"surname":{"type":"string"},"username":{"type":"string"},"company":{"type":"string"},"leaveEntitlementPerYear":{"type":"integer","format":"int32"},"workingDays":{"type":"string"},"position":{"type":"string"},"startDate":{"type":"string"},"endDate":{"type":"string"},"role":{"type":"string"},"dateOfBirth":{"type":"string"},"hourlyWage":{"type":"number","format":"double"},"contractedHoursPerWeek":{"type":"integer","format":"int32"},"trainings":{"type":"array","items":{"type":"string"}},"userHistory":{"type":"array","items":{"$ref":"#/components/schemas/UserHistoryResponse"}}}},"UsersResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"userResponses":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}},"CompanyResponse":{"type":"object","properties":{"name":{"type":"string"},"defaultAnnualLeaveInDays":{"type":"integer","format":"int32"},"country":{"type":"string"}}},"AbsenceResponse":{"type":"object","properties":{"company":{"type":"string"},"username":{"type":"string"},"startDate":{"type":"string"},"endDate":{"type":"string"},"category":{"type":"string"}}},"AbsencesResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"absenceResponseList":{"type":"array","items":{"$ref":"#/components/schemas/AbsenceResponse"}},"statisticsMap":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}}}}}}}